<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>DogCamp Instagram Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      margin: 0;
      padding: 0;
      background: #f3f4f6;
      color: #111827;
    }

    .page {
      max-width: 1100px;
      margin: 0 auto;
      padding: 24px;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .hidden {
      display: none !important;
    }

    /* Login layout */
    .login-container {
      max-width: 480px;
      margin: 0 auto;
      background: #ffffff;
      border-radius: 16px;
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.2);
      padding: 24px 24px 20px;
    }

    .login-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 8px;
    }

    .logo {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      overflow: hidden;
      background: #f3f4f6;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .logo img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    .login-title h1 {
      margin: 0;
      font-size: 20px;
      font-weight: 700;
    }

    .login-title p {
      margin: 2px 0 0;
      font-size: 12px;
      color: #6b7280;
    }

    .login-body {
      margin-top: 16px;
    }

    .login-body p {
      margin: 0 0 12px;
      font-size: 13px;
      color: #4b5563;
    }

    .login-note {
      font-size: 11px;
      color: #9ca3af;
      margin-top: 8px;
    }

    .login-button {
      width: 100%;
      margin-top: 16px;
      padding: 10px 14px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-size: 14px;
      font-weight: 600;
      background: #1877f2;
      color: #ffffff;
    }

    .login-button:hover {
      background: #1456b8;
    }

    .login-button span.icon {
      font-size: 16px;
    }

    .login-footer {
      margin-top: 14px;
      font-size: 10px;
      color: #9ca3af;
      text-align: right;
    }

    /* Dashboard layout */
    .dashboard-container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 24px;
    }

    .header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 24px;
    }

    .title-block h2 {
      margin: 0;
      font-size: 22px;
      font-weight: 700;
    }

    .title-block p {
      margin: 2px 0 0;
      font-size: 13px;
      color: #6b7280;
    }

    .grid {
      display: grid;
      grid-template-columns: 1.3fr 1.7fr;
      gap: 16px;
      margin-bottom: 16px;
    }

    .card {
      background: #ffffff;
      border-radius: 12px;
      padding: 16px;
      box-shadow: 0 8px 16px rgba(15, 23, 42, 0.08);
    }

    .card h3 {
      margin: 0 0 8px;
      font-size: 16px;
    }

    .card p.desc {
      margin: 0 0 12px;
      font-size: 12px;
      color: #6b7280;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      border-radius: 999px;
      padding: 4px 10px;
      font-size: 11px;
      background: #eff6ff;
      color: #1d4ed8;
      margin-bottom: 8px;
    }

    .badge span.icon {
      font-size: 13px;
    }

    .info-row {
      display: flex;
      gap: 12px;
      margin-top: 8px;
      flex-wrap: wrap;
    }

    .info-item {
      padding: 8px 10px;
      border-radius: 10px;
      background: #f9fafb;
      font-size: 12px;
    }

    .info-label {
      display: block;
      font-size: 11px;
      color: #6b7280;
      margin-bottom: 2px;
    }

    .info-value {
      font-weight: 600;
    }

    .section-title {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 8px;
    }

    .section-title h4 {
      margin: 0;
      font-size: 14px;
    }

    .section-title span {
      font-size: 11px;
      color: #6b7280;
    }

    .post-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
      max-height: 260px;
      overflow-y: auto;
      padding-right: 4px;
    }

    .post-item {
      display: grid;
      grid-template-columns: 72px 1fr;
      gap: 10px;
      padding: 8px;
      border-radius: 10px;
      background: #f9fafb;
      border: 1px solid #e5e7eb;
    }

    .thumb {
      width: 72px;
      height: 72px;
      border-radius: 10px;
      background-size: cover;
      background-position: center;
      background-color: #e5e7eb;
      position: relative;
      overflow: hidden;
    }

    .thumb-label {
      position: absolute;
      bottom: 4px;
      right: 4px;
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 999px;
      background: rgba(17, 24, 39, 0.8);
      color: #f9fafb;
    }

    .post-meta {
      font-size: 11px;
      color: #6b7280;
      margin-bottom: 4px;
    }

    .post-caption {
      font-size: 12px;
      margin-bottom: 4px;
      max-height: 36px;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .post-link {
      font-size: 11px;
      color: #2563eb;
      text-decoration: none;
    }

    .post-link:hover {
      text-decoration: underline;
    }

    .hashtag-search {
      margin-top: 8px;
    }

    .input-row {
      display: flex;
      gap: 8px;
      margin-bottom: 8px;
    }

    .input-row input {
      flex: 1;
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid #d1d5db;
      font-size: 13px;
    }

    .input-row button {
      padding: 8px 14px;
      border-radius: 10px;
      border: none;
      background: #2563eb;
      color: #ffffff;
      font-size: 13px;
      cursor: pointer;
    }

    .input-row button:hover {
      background: #1d4ed8;
    }

    .hint {
      font-size: 11px;
      color: #6b7280;
      margin-bottom: 6px;
    }

    .tag-chip {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 3px 8px;
      border-radius: 999px;
      font-size: 11px;
      background: #fef9c3;
      color: #854d0e;
      margin-right: 4px;
    }

    .empty {
      font-size: 12px;
      color: #9ca3af;
      padding: 8px 0;
    }

    footer {
      margin-top: 16px;
      font-size: 10px;
      color: #9ca3af;
      text-align: right;
    }

    @media (max-width: 900px) {
      .grid {
        grid-template-columns: 1fr;
      }

      .page {
        padding: 16px;
      }

      .dashboard-container {
        padding: 16px;
      }
    }
  </style>
</head>
<body>
  <!-- LOGIN VIEW -->
  <div class="page" id="login-view">
    <div class="login-container">
      <div class="login-header">
        <div class="logo">
          <!-- Replace with your logo file name -->
          <img src="dogcamp-logo.png" alt="DogCamp logo" />
        </div>
        <div class="login-title">
          <h1>DogCamp Internal Dashboard</h1>
          <p>Instagram Business integration for DogCamp staff only</p>
        </div>
      </div>

      <div class="login-body">
        <p>
          This is a private internal tool used by staff at DogCamp, a dog daycare & caf√© near Incheon Airport.
        </p>
        <p>
          To continue, we first sign in to the DogCamp dashboard and then use the
          <code>instagram_basic</code> permission to read our own Instagram Business account
          (@dogcamp.gochon) via the Instagram Graph API.
        </p>

        <button class="login-button" id="login-btn" type="button">
          <span class="icon">üîê</span>
          <span>Log in and connect Instagram</span>
        </button>

        <p class="login-note">
          For the purposes of this demo, this button represents our internal login flow and the moment
          when our staff member grants the app access to the <code>instagram_basic</code> permission
          for our own Business account.
        </p>
      </div>

      <div class="login-footer">
        Demo for Meta App Review &middot; DogCamp Gochon
      </div>
    </div>
  </div>

  <!-- DASHBOARD VIEW (AFTER LOGIN) -->
  <div class="dashboard-container hidden" id="dashboard-view">
    <header class="header">
      <div class="logo">
        <img src="dogcamp-logo.png" alt="DogCamp logo" />
      </div>
      <div class="title-block">
        <h2>DogCamp Instagram Dashboard</h2>
        <p>
          Internal dashboard for DogCamp staff, showing our own Instagram Business account data
          using the <code>instagram_basic</code> permission.
        </p>
      </div>
    </header>

    <div class="grid">
      <!-- LEFT: our Business account info + our posts -->
      <section class="card">
        <div class="badge">
          <span class="icon">üîê</span>
          <span>instagram_basic usage</span>
        </div>
        <h3>Connected Instagram Business Account</h3>
        <p class="desc">
          This section uses the <code>instagram_basic</code> permission with the Instagram Graph API
          endpoints <code>/{ig-user-id}?fields=id,username,media_count</code> and
          <code>/{ig-user-id}/media</code> to display information and media from our own Business account.
        </p>

        <div class="info-row" id="account-info"></div>

        <div class="section-title" style="margin-top: 14px;">
          <h4>Recent posts from our account</h4>
          <span>Only content from our own Business account</span>
        </div>

        <div class="post-list" id="own-posts"></div>
      </section>

      <!-- RIGHT: hashtag demo (mock data, future use with Public Content Access) -->
      <section class="card">
        <div class="badge">
          <span class="icon">#Ô∏è‚É£</span>
          <span>Public hashtag demo (mock)</span>
        </div>
        <h3>Brand Hashtag Search (demo)</h3>
        <p class="desc">
          This section shows a demo of how we plan to use the Instagram Hashtag Search API with
          Instagram Public Content Access in the future. For this review, the data here is mock/example
          data only and does not rely on <code>instagram_basic</code>.
        </p>

        <div class="hashtag-search">
          <div class="hint">
            Example hashtags:
            <span class="tag-chip">#ÎèÑÍ∑∏Ï∫†ÌîÑ</span>
            <span class="tag-chip">#ÎèÑÍ∑∏Ï∫†ÌîÑÍ≥µÌï≠Ï†ê</span>
          </div>
          <div class="input-row">
            <input id="hashtag-input" type="text" placeholder="#ÎèÑÍ∑∏Ï∫†ÌîÑ" />
            <button id="search-btn" type="button">Search</button>
          </div>
          <div class="hint">
            In production, this section will be powered by
            <code>/ig_hashtag_search</code> and <code>/{hashtag-id}/recent_media</code>.
          </div>
        </div>

        <div class="section-title" style="margin-top: 10px;">
          <h4>Hashtag search results (chronological)</h4>
          <span id="current-tag-label">No search yet</span>
        </div>

        <div class="post-list" id="hashtag-results">
          <div class="empty">
            Type one of our brand hashtags above and click ‚ÄúSearch‚Äù to see example public posts.
          </div>
        </div>
      </section>
    </div>

    <footer>
      This dashboard is used only by DogCamp staff. We do not collect or store sensitive personal information,
      and we only use public data from our own Business account and public posts with our brand hashtags.
    </footer>
  </div>

  <script>
    // -----------------------------
    // 1. Simple "login" simulation (for flow in screencast)
    // -----------------------------
    const loginBtn = document.getElementById("login-btn");
    const loginView = document.getElementById("login-view");
    const dashboardView = document.getElementById("dashboard-view");

    loginBtn.addEventListener("click", () => {
      // For the demo, we simply switch the view.
      // In a real implementation, this would happen after Meta login + granting instagram_basic.
      loginView.classList.add("hidden");
      dashboardView.classList.remove("hidden");
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

    // -----------------------------
    // 2. instagram_basic usage demo: our account info + our posts (mock data)
    // -----------------------------
    const mockAccount = {
      id: "17841451651429958",
      username: "dogcamp.gochon",
      media_count: 752
    };

    const mockOwnPosts = [
      {
        id: "18000000000000001",
        caption: "Dog kindergarten friends at DogCamp near the airport üê∂‚úàÔ∏è #ÎèÑÍ∑∏Ï∫†ÌîÑ #ÎèÑÍ∑∏Ï∫†ÌîÑÍ≥µÌï≠Ï†ê",
        permalink: "https://www.instagram.com/p/DEMOPOST01/",
        media_type: "IMAGE",
        media_url: "https://images.pexels.com/photos/1108099/pexels-photo-1108099.jpeg?auto=compress&cs=tinysrgb&w=300",
        timestamp: "2025-11-30T10:23:45+0000"
      },
      {
        id: "18000000000000002",
        caption: "Quick playtime before heading to the airport üêæ #dogcamp",
        permalink: "https://www.instagram.com/p/DEMOPOST02/",
        media_type: "IMAGE",
        media_url: "https://images.pexels.com/photos/3299900/pexels-photo-3299900.jpeg?auto=compress&cs=tinysrgb&w=300",
        timestamp: "2025-11-28T09:10:20+0000"
      },
      {
        id: "18000000000000003",
        caption: "New friend getting used to DogCamp üôÇ Safe and fun day as always!",
        permalink: "https://www.instagram.com/p/DEMOPOST03/",
        media_type: "IMAGE",
        media_url: "https://images.pexels.com/photos/4587795/pexels-photo-4587795.jpeg?auto=compress&cs=tinysrgb&w=300",
        timestamp: "2025-11-25T12:01:10+0000"
      }
    ];

    function renderAccountInfo() {
      const container = document.getElementById("account-info");
      container.innerHTML = `
        <div class="info-item">
          <span class="info-label">Connected account</span>
          <span class="info-value">@${mockAccount.username}</span>
        </div>
        <div class="info-item">
          <span class="info-label">Media count</span>
          <span class="info-value">${mockAccount.media_count.toLocaleString("en-US")} posts</span>
        </div>
        <div class="info-item">
          <span class="info-label">IG User ID</span>
          <span class="info-value">${mockAccount.id}</span>
        </div>
      `;
    }

    function renderOwnPosts() {
      const list = document.getElementById("own-posts");
      list.innerHTML = "";

      mockOwnPosts.forEach((post) => {
        const item = document.createElement("div");
        item.className = "post-item";

        const thumb = document.createElement("div");
        thumb.className = "thumb";
        thumb.style.backgroundImage = `url("${post.media_url}")`;
        thumb.innerHTML = `<div class="thumb-label">Our account</div>`;

        const right = document.createElement("div");
        const meta = document.createElement("div");
        meta.className = "post-meta";
        const date = new Date(post.timestamp);
        meta.textContent = `${date.toLocaleDateString("en-US")} ¬∑ ${post.media_type}`;

        const caption = document.createElement("div");
        caption.className = "post-caption";
        caption.textContent = post.caption;

        const link = document.createElement("a");
        link.className = "post-link";
        link.href = post.permalink;
        link.target = "_blank";
        link.rel = "noopener noreferrer";
        link.textContent = "View on Instagram";

        right.appendChild(meta);
        right.appendChild(caption);
        right.appendChild(link);

        item.appendChild(thumb);
        item.appendChild(right);
        list.appendChild(item);
      });
    }

    // -----------------------------
    // 3. Hashtag Search demo: mock public posts
    // -----------------------------
    const mockHashtagResults = {
      "ÎèÑÍ∑∏Ï∫†ÌîÑ": [
        {
          id: "19000000000000001",
          username: "happy_dog_mom",
          caption: "Playing at DogCamp before our flight üê∂‚úàÔ∏è #ÎèÑÍ∑∏Ï∫†ÌîÑ #Ïù∏Ï≤úÍ≥µÌï≠",
          permalink: "https://www.instagram.com/p/HASHTAG01/",
          media_type: "IMAGE",
          media_url: "https://images.pexels.com/photos/7210269/pexels-photo-7210269.jpeg?auto=compress&cs=tinysrgb&w=300",
          timestamp: "2025-11-29T08:15:00+0000"
        },
        {
          id: "19000000000000002",
          username: "travel_with_puppy",
          caption: "Last energy burst before the flight! DogCamp is the best üëç #ÎèÑÍ∑∏Ï∫†ÌîÑ #ÎèÑÍ∑∏Ï∫†ÌîÑÍ≥µÌï≠Ï†ê",
          permalink: "https://www.instagram.com/p/HASHTAG02/",
          media_type: "IMAGE",
          media_url: "https://images.pexels.com/photos/7210282/pexels-photo-7210282.jpeg?auto=compress&cs=tinysrgb&w=300",
          timestamp: "2025-11-27T14:32:10+0000"
        }
      ],
      "ÎèÑÍ∑∏Ï∫†ÌîÑÍ≥µÌï≠Ï†ê": [
        {
          id: "19000000000000003",
          username: "puppy_airport",
          caption: "First time at the airport branch! Staff were super kind üíõ #ÎèÑÍ∑∏Ï∫†ÌîÑÍ≥µÌï≠Ï†ê",
          permalink: "https://www.instagram.com/p/HASHTAG03/",
          media_type: "IMAGE",
          media_url: "https://images.pexels.com/photos/7210535/pexels-photo-7210535.jpeg?auto=compress&cs=tinysrgb&w=300",
          timestamp: "2025-11-26T11:05:00+0000"
        }
      ]
    };

    function renderHashtagResults(tag) {
      const list = document.getElementById("hashtag-results");
      const label = document.getElementById("current-tag-label");

      const normalized = tag.replace(/^#/, "").trim();
      if (!normalized) {
        label.textContent = "No search yet";
        list.innerHTML = `<div class="empty">Please enter a brand hashtag above and click ‚ÄúSearch‚Äù.</div>`;
        return;
      }

      label.textContent = `Results for #${normalized}`;

      const results = mockHashtagResults[normalized];
      list.innerHTML = "";

      if (!results || results.length === 0) {
        list.innerHTML = `<div class="empty">There are no example posts for #${normalized} in this demo dataset.</div>`;
        return;
      }

      results.forEach((post) => {
        const item = document.createElement("div");
        item.className = "post-item";

        const thumb = document.createElement("div");
        thumb.className = "thumb";
        thumb.style.backgroundImage = `url("${post.media_url}")`;
        thumb.innerHTML = `<div class="thumb-label">Customer post</div>`;

        const right = document.createElement("div");
        const meta = document.createElement("div");
        meta.className = "post-meta";
        const date = new Date(post.timestamp);
        meta.textContent = `${date.toLocaleDateString("en-US")} ¬∑ @${post.username}`;

        const caption = document.createElement("div");
        caption.className = "post-caption";
        caption.textContent = post.caption;

        const link = document.createElement("a");
        link.className = "post-link";
        link.href = post.permalink;
        link.target = "_blank";
        link.rel = "noopener noreferrer";
        link.textContent = "View on Instagram";

        right.appendChild(meta);
        right.appendChild(caption);
        right.appendChild(link);

        item.appendChild(thumb);
        item.appendChild(right);
        list.appendChild(item);
      });
    }

    // Initial render for dashboard (when shown)
    renderAccountInfo();
    renderOwnPosts();

    document.getElementById("search-btn").addEventListener("click", () => {
      const input = document.getElementById("hashtag-input");
      const value = input.value.trim() || "#ÎèÑÍ∑∏Ï∫†ÌîÑ";
      renderHashtagResults(value);
    });
  </script>
</body>
</html>
